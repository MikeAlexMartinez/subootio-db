Table admin_roles {
  id integer PK
  name varchar
  description varchar
  date_created timestamp
  date_modified timestamp
}

Table user_admin {
  id integer PK
  email varchar
  password varchar
  admin_role_id integer
  date_created timestamp
  date_modified timestamp
}
Ref user_admin_admin_role_id {
  user_admin.admin_role_id > admin_roles.id
}

Table user_header {
  id integer PK
  email varchar
  password varchar
  publickey varchar
  is_private boolean
  is_premium boolean
  date_created timestamp
  date_modified timestamp
}

Table user_connections {
  id integer PK
  user_id integer
  follower_id integer
  awaiting_response boolean
  is_active boolean
  is_blocked boolean
  date_created timestamp
  date_modified timestamp
}
Ref user_connections_user_id {
  user_connections.user_id > user_header.id 
}
Ref user_connections_follower_id {
  user_connections.follower_id > user_header.id 
}

Table scoring_system_header {
  id integer PK
  is_custom integer
  created_by integer
  last_modified_by integer
  date_created timestamp
  date_modified timestamp
}
Ref scoring_system_header_created_by {
  scoring_system_header.created_by > user_header.id
}
Ref scoring_system_header_last_modified_by {
  scoring_system_header.last_modified_by > user_header.id
}

Table scoring_details {
  id integer PK
  name varchar
  description varchar
  type varchar
  is_default boolean
  created_by integer
  points smallint
  last_modified_by integer
  date_created timestamp
  date_modified timestamp
}

Table contest_header {
  id integer PK
  contest_name varchar
  is_active boolean
  is_default boolean
  created_by integer
  current_owner integer
  is_public boolean
  is_private boolean
  invitation_code varchar
  start_date timestamp
  end_date timestamp
  current_event smallint
  total_events smallint
  is_premium boolean
  player_limit integer
  last_modified_by integer
  date_created timestamp
  date_modified timestamp
}
Ref contest_header_created_by {
  contest_header.created_by > user_header.id 
}
Ref contest_header_current_owner {
  contest_header.current_owner > user_header.id 
}
Ref contest_header_last_modified_by {
  contest_header.last_modified_by > user_header.id 
}

Table contest_scoring {
  id integer PK
  contest_header_id integer
  scoring_system_header_id integer
  is_active boolean
  contest_slate_start integer
  contest_slate_end integer
}

Table user_invite {
  id integer PK
  invite_code varchar
  email varchar
  invite_creator integer
  accepted boolean
  date_created timestamp
  date_modified timestamp
}
Ref user_invite_invite_creator {
  user_invite.invite_creator > user_header.id
}

Table successful_invite_user {
  id integer PK
  userinvite_id integer
  new_user_id integer
  date_created timestamp
  date_modified timestamp
}
Ref successful_invite_user_new_user_id {
  successful_invite_user.new_user_id - user_header.id
}
Ref successful_invite_user_userinvite_id {
  successful_invite_user.userinvite_id - user_invite.id
}

Table participant_type {
  id integer PK
  participant_type_name varchar
  participant_description varchar
  date_created timestamp
  date_modified timestamp
}

Table contest_user {
  id integer PK
  contest_header_id integer
  participant_type_id integer
  user_id integer
  is_invited boolean
  invite_status_id smallint 
  is_active boolean
  is_blocked boolean
  balance float
  created_by integer
  invited_by integer
  date_created timestamp
  date_modified timestamp
}
Ref contest_user_contest_header_id {
  contest_user.contest_header_id > contest_header.id
}
Ref contest_user_participant_type {
  contest_user.participant_type_id > participant_type.id
}
Ref contest_user_user_id {
  contest_user.user_id > user_header.id
}
Ref contest_user_created_by {
  contest_user.created_by > user_header.id
}
Ref contest_user_invited_by {
  contest_user.invited_by > user_header.id
}

Table team {
  code integer PK
  fpl_team_id integer
  fantasy_id integer
  name varchar
  short_name varchar(3)
  strength smallint
  strength_attack_away integer
  strength_attack_home integer
  strength_defence_away integer
  strength_defence_home integer
  strength_overall_away integer
  strength_overall_home integer
  team_division integer
  date_created timestamp
  date_modified timestamp
}

Table season {
  id integer PK
  competition varchar
  start_year integer
  end_year integer
  is_current boolean
  is_previous boolean
  is_next boolean
  date_created timestamp
  date_modified timestamp
}

Table event {
  id integer PK
  fpl_event_id integer
  season_id integer
  average_entry_score integer 
  data_checked boolean
  deadline_time timestamp
  deadline_time_epoch integer
  deadline_time_formatted varchar
  deadline_time_game_offset integer
  finished boolean
  highest_score integer
  highest_scoring_entry integer
  is_current boolean
  is_next boolean
  is_previous boolean
  name varchar
}
Ref event_season_id {
  event.season_id > season.id
}

Table fixture_header {
  id integer PK
  fpl_fixture_id integer
  season_id integer
  fantasy_id integer
  code integer
  deadline_time timestamp
  deadline_time_formatted varchar
  event integer
  event_day smallint
  finished boolean
  finished_provisional boolean
  kickoff_time timestamp
  kickoff_time_formatted varchar
  minutes smallint
  provisional_start_time boolean
  started boolean
  team_a integer
  team_a_score smallint
  team_h integer
  team_h_score smallint
  result varchar(2)
  last_modified_by integer
  date_created timestamp
  date_modified timestamp
}
Ref fixture_header_season_id {
  fixture_header.season_id > season.id
}
Ref fixture_header_team_a {
  fixture_header.team_a > team.fpl_team_id
}
Ref fixture_header_team_h {
  fixture_header.team_h > team.fpl_team_id
}
Ref fixture_header_event {
  fixture_header.event > event.id
}

Table default_slate_header {
  id integer PK
  source varchar
  type varchar
  event_id integer
  date_created timestamp
  date_modified timestamp
}
Ref default_slate_header_event_id {
  default_slate_header.event_id - event.id
}

Table default_slate_entries {
  id integer PK
  default_slate_header_id integer
  fixture_id integer
  date_created timestamp
  date_modified timestamp
}
Ref default_slate_entries_default_slate_header_id {
  default_slate_entries.default_slate_header_id > default_slate_header.id
}
Ref default_slate_entries_fixture_id {
  default_slate_entries.fixture_id - fixture_header.id
}

Table contest_slate_header {
  id integer PK
  contest_header_id integer
  event_id integer
  from_default boolean
  is_active boolean
  start_date timestamp
  end_date timestamp
  has_started boolean
  has_finished boolean
  total_possible_entries integer
  total_entries integer
  date_created timestamp
  date_modified timestamp
}
Ref contest_slate_header_contest_header {
  contest_slate_header.contest_header_id > contest_header.id
}

Table contest_slate_entry {
  id integer PK
  contest_slate_header_id integer
  fixture_id integer
  date_created timestamp
  date_modified timestamp
}
Ref contest_slate_entry_contest_slate_header_id {
  contest_slate_entry.contest_slate_header_id > contest_slate_header.id
}
Ref contest_slate_entry_fixture_id {
  contest_slate_entry.fixture_id > fixture_header.id
}


Table content_slate_header_default_header {
  id integer PK
  contest_slate_header_id integer
  default_slate_header_id integer
  date_created timestamp
  date_modified timestamp
}
Ref content_slate_header_default_header_default_slate_header_id {
  content_slate_header_default_header.default_slate_header_id > default_slate_header.id
}
Ref content_slate_header_default_header_contest_slate_header_id {
  content_slate_header_default_header.contest_slate_header_id > contest_slate_header.id
}


// This table contains all user predictions
// For this contest
Table contest_result {
  id integer PK
  contest_slate_entry_id integer
  contest_user_id integer
  home_score integer
  away_score integer
  expected_result varchar(2)
  scores_matches boolean
  result_matches boolean
  is_banker boolean
  has_started boolean
  has_finished boolean
  points_scored smallint
  deadline timestamp
  date_created timestamp
  date_modified timestamp
}

// This table contains player points totals for each week
Table contest_points {
  id integer PK
  contest_slate_header_id integer
  contest_user_id integer
  total_points integer
  date_created timestamp
  date_modified timestamp
}
